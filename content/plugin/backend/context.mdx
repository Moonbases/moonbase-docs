---
title: Backend Plugin Context
description: What the backend ctx object provides.
---

Every backend plugin gets a `PluginContext` object.

## Context map

<Tabs items={['Core fields', 'Routers', 'Services', 'Modules & core']} defaultIndex={0}>
  <Tab>
    - `app`: Express app instance.
    - `env`: `process.env`.
    - `logger`: Moonbase logger.
    - `hooks`: lifecycle hooks (routes ready, shutdown).
    - `paths`: `rootDir`, `pluginsDir`.
  </Tab>
  <Tab>
    - `routers.api`
    - `routers.dashboard`
    - `routers.purchase`
  </Tab>
  <Tab>
    - `services.API` (database access)
    - `services.stripe`
    - `services.coinbaseCommerce`
    - `services.paypalCheckout`
    - `services.emailService`
  </Tab>
  <Tab>
    - `modules.purchase` (route module; can be wrapped or patched)
    - `core.controllers`, `core.models`, `core.helpers`, `core.utils`
  </Tab>
</Tabs>

## Examples

<Tabs items={['Add a route', 'Patch a service']} defaultIndex={0}>
  <Tab>
    ```js
    module.exports = {
      name: 'status-endpoint',
      register(ctx) {
        ctx.routers.api.get('/plugins/status', (_req, res) => {
          res.json({ status_overview: 'success', status_message: 'OK' });
        });
      }
    };
    ```
  </Tab>
  <Tab>
    ```js
    module.exports = {
      name: 'stripe-tagger',
      register(ctx) {
        const original = ctx.services.stripe.checkout.sessions.create.bind(
          ctx.services.stripe.checkout.sessions
        );
        ctx.services.stripe.checkout.sessions.create = async (params, options) => {
          return original({ ...params, metadata: { ...params.metadata, tag: 'plugin' } }, options);
        };
      }
    };
    ```
  </Tab>
</Tabs>
